# Отчет по лабораторной работе №3

## Разработка требований к программной системе

---

## Цель работы

Разработать требования к программной системе с использованием современных методологий проектирования:

- UML диаграммы с помощью PlantUML
- Event Storming для исследования предметной области
- Event Modeling для проектирования системы
- C4 Model для описания архитектуры

---

## Выполненные задания

### 1. Разработка спецификации системы с использованием PlantUML

#### 1.1 Диаграммы вариантов использования

- **Файл:** `use-case-diagram.puml`
- **Сценарии:** `use-case-scenarios.md`
- **Описание:** Создана диаграмма с 5 основными актерами (Гость, Покупатель, Администратор, Менеджер, Курьер) и 24 вариантами использования, сгруппированными по функциональным областям
- **Детальные сценарии:** Разработано 5 подробных сценариев для ключевых use case

#### 1.2 Диаграммы деятельности

- **Файлы:** `activity-order-processing.puml`, `activity-product-search.puml`
- **Описание:** Созданы 2 диаграммы деятельности, показывающие бизнес-процессы оформления заказа и поиска товаров с альтернативными потоками

#### 1.3 Диаграммы классов

Создано 4 диаграммы классов:

- **Основные сущности** (`class-diagram-core.puml`): User, Product, Category, Brand и их связи
- **Заказы и корзина** (`class-diagram-order.puml`): Order, Cart, Payment, Delivery
- **Отзывы и рейтинги** (`class-diagram-review.puml`): Review, ProductRating, ReviewHelpfulness
- **Сервисные классы** (`class-diagram-services.puml`): Интерфейсы и реализации сервисов

#### 1.4 Диаграммы последовательности

Создано 5 диаграмм последовательности:

- Регистрация пользователя
- Поиск товаров
- Создание заказа
- Отправка отзыва
- Управление товарами администратором

#### 1.5 Диаграммы компонентов и пакетов

- **Компоненты** (`component-diagram.puml`): Архитектура системы по слоям с внешними зависимостями
- **Пакеты** (`package-diagram.puml`): Структура Java-пакетов с зависимостями

#### 1.6 Диаграмма развертывания

- **Файл:** `deployment-diagram.puml`
- **Описание:** Показана высокодоступная инфраструктура с кластерами БД, кэша, поиска и мониторингом

#### 1.7 Схема базы данных (ERD)

- **Файл:** `erd-database.puml`
- **Описание:** Полная схема БД с 15 таблицами, связями и ограничениями

### 2. Проектирование системы методом Event Storming

#### 2.1 Крупномасштабное исследование (Big Picture)

- **Файл:** `event-storming-big-picture.puml`
- **Содержание:**
  - 20 доменных событий (оранжевые стикеры)
  - 18 команд (голубые стикеры)
  - 5 актеров (желтые стикеры)
  - 5 политик/правил (фиолетовые стикеры)
  - 4 внешние системы (розовые стикеры)
  - 3 проблемные точки (красные стикеры)

#### 2.2 Моделирование процессов

- **Файл:** `event-storming-process-modeling.puml`
- **Содержание:**
  - 8 агрегатов (User, Product Catalog, Shopping Cart, Order, Payment, Inventory, Shipping, Review)
  - 6 моделей чтения
  - 4 автоматизированные политики
  - Связи между агрегатами через события

### 3. Проектирование системы методом Event Modeling

#### 3.1 Поток оформления заказа

- **Файл:** `event-modeling-order-flow.puml`
- **Шаблоны:**
  - Командный шаблон: Trigger → Command → Event(s)
  - Шаблон представления: Event(s) → View
  - Шаблон автоматизации: Event(s) → View → Auto Trigger → Command → Event(s)

#### 3.2 Управление товарами

- **Файл:** `event-modeling-product-management.puml`
- **Покрывает:** Добавление товаров, поиск, обновление каталога, автоматическое обновление индекса

### 4. Описание архитектуры системы методом C4 Model

#### 4.1 Контекстная диаграмма (Level 1)

- **Файл:** `c4-context-diagram.puml`
- **Показывает:** Систему ТехноМарт в контексте пользователей и внешних систем

#### 4.2 Диаграмма контейнеров (Level 2)

- **Файл:** `c4-container-diagram.puml`
- **Содержит:**
  - 3 фронтенд приложения
  - API Gateway
  - 5 микросервисов
  - 4 системы хранения данных

#### 4.3 Диаграмма компонентов (Level 3)

- **Файл:** `c4-component-diagram.puml`
- **Детализирует:** Внутреннюю структуру Product Service с контроллерами, сервисами и репозиториями

---

## Использованные технологии и инструменты

### PlantUML

- Все диаграммы созданы с использованием PlantUML синтаксиса
- Применены темы и стилизация для улучшения читаемости
- Использованы включения библиотек для C4 диаграмм

### Методологии проектирования

1. **Event Storming** - для исследования предметной области
2. **Event Modeling** - для проектирования поведения системы
3. **C4 Model** - для документирования архитектуры
4. **UML** - для детального моделирования

---

## Структура файлов проекта

```
lab3/
├── diagrams/
│   ├── use-case-diagram.puml
│   ├── activity-order-processing.puml
│   ├── activity-product-search.puml
│   ├── class-diagram-core.puml
│   ├── class-diagram-order.puml
│   ├── class-diagram-review.puml
│   ├── class-diagram-services.puml
│   ├── sequence-user-registration.puml
│   ├── sequence-product-search.puml
│   ├── sequence-order-creation.puml
│   ├── sequence-review-submission.puml
│   ├── sequence-admin-product-management.puml
│   ├── component-diagram.puml
│   ├── package-diagram.puml
│   ├── deployment-diagram.puml
│   ├── erd-database.puml
│   ├── event-storming-big-picture.puml
│   ├── event-storming-process-modeling.puml
│   ├── event-modeling-order-flow.puml
│   ├── event-modeling-product-management.puml
│   ├── c4-context-diagram.puml
│   ├── c4-container-diagram.puml
│   └── c4-component-diagram.puml
├── use-case-scenarios.md
└── lab3-report.md
```

---

## Ключевые архитектурные решения

### 1. Микросервисная архитектура

- Разделение на независимые сервисы (User, Product, Order, Review, Notification)
- API Gateway для маршрутизации и аутентификации
- Асинхронная связь через события

### 2. Событийно-ориентированная архитектура

- Использование доменных событий для связи между сервисами
- Автоматизированные политики для бизнес-правил
- Event Sourcing для критически важных агрегатов

### 3. CQRS (Command Query Responsibility Segregation)

- Разделение команд и запросов
- Специализированные модели чтения
- Оптимизация производительности чтения

### 4. Высокая доступность

- Кластеризация баз данных с репликацией
- Балансировка нагрузки
- Кэширование на уровне Redis
- Мониторинг и логирование

---

## Выводы

В ходе выполнения лабораторной работы были успешно применены современные методологии проектирования программных систем:

1. **UML диаграммы** обеспечили детальное понимание структуры и поведения системы
2. **Event Storming** помог выявить ключевые бизнес-процессы и проблемные точки
3. **Event Modeling** позволил спроектировать поведение системы с учетом Given/When/Then паттернов
4. **C4 Model** обеспечил четкое документирование архитектуры на разных уровнях абстракции

Все методологии дополняют друг друга и обеспечивают комплексный подход к проектированию сложной системы онлайн-магазина.

### Практическая ценность

Созданные артефакты могут быть использованы:

- Командой разработки для понимания требований
- Архитекторами для принятия технических решений
- Тестировщиками для создания тест-кейсов
- Продуктовыми менеджерами для планирования функциональности
