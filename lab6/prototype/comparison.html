<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ - –¢–µ—Ö–Ω–æ–ú–∞—Ä—Ç</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .comparison-table-wrapper {
            background: white;
            border-radius: 12px;
            padding: 30px;
            overflow-x: auto;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid #E5E7EB;
        }

        .comparison-table th {
            background: #F9FAFB;
            font-weight: 600;
            color: #1F2937;
            position: sticky;
            left: 0;
            z-index: 1;
        }

        .comparison-product-cell {
            text-align: center;
            min-width: 250px;
        }

        .comparison-product-image {
            width: 120px;
            height: 120px;
            background: #F3F4F6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            margin: 0 auto 12px;
        }

        .comparison-product-name {
            font-weight: 600;
            margin-bottom: 12px;
            color: #1F2937;
        }

        .comparison-product-price {
            font-size: 24px;
            font-weight: 700;
            color: #10B981;
            margin-bottom: 12px;
        }

        .comparison-remove {
            background: #FEE2E2;
            color: #991B1B;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .comparison-remove:hover {
            background: #FCA5A5;
        }

        .spec-row-label {
            font-weight: 500;
            color: #6B7280;
        }

        .spec-value {
            text-align: center;
            color: #1F2937;
        }

        .empty-slot {
            text-align: center;
            padding: 40px;
            color: #9CA3AF;
            background: #F9FAFB;
            border-radius: 8px;
            min-width: 250px;
        }

        .empty-slot-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        @media (max-width: 768px) {
            .comparison-table-wrapper {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-top">
            <div class="header-container">
                <span>üìû +375 29 123-45-67</span>
                <span>üöö –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç 200 Br</span>
            </div>
        </div>
        
        <div class="header-container" style="padding: 15px 20px;">
            <a href="index.html" class="logo">–¢–µ—Ö–Ω–æ–ú–∞—Ä—Ç</a>
            
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
                <button class="search-btn" onclick="goToSearch()">üîç</button>
            </div>
            
            <div class="header-icons">
                <button class="icon-btn" onclick="goToComparison()">
                    ‚öñÔ∏è
                    <span class="badge" id="compareCount">0</span>
                </button>
                <button class="icon-btn" onclick="goToFavorites()">
                    ‚ù§Ô∏è
                    <span class="badge" id="favoriteCount">0</span>
                </button>
                <button class="icon-btn" onclick="goToCart()">
                    üõí
                    <span class="badge" id="cartCount">0</span>
                </button>
                <button class="icon-btn" onclick="goToProfile()">
                    üë§
                </button>
            </div>
        </div>
        
        <nav class="nav-menu">
            <ul>
                <li><a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                <li><a href="sales.html">–ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏</a></li>
                <li><a href="help.html">–ü–æ–º–æ—â—å –∏ —Å–µ—Ä–≤–∏—Å</a></li>
                <li><a href="about.html">–û –∫–æ–º–ø–∞–Ω–∏–∏</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <div class="breadcrumbs">
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
            <span>/</span>
            <span>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</span>
        </div>

        <h1>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</h1>

        <div id="comparisonContent"></div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div>
                <h4>–û –∫–æ–º–ø–∞–Ω–∏–∏</h4>
                <ul>
                    <li><a href="about.html">–û –Ω–∞—Å</a></li>
                    <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                </ul>
            </div>
            <div>
                <h4>–ü–æ–º–æ—â—å</h4>
                <ul>
                    <li><a href="delivery.html">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a></li>
                    <li><a href="guarantee.html">–ì–∞—Ä–∞–Ω—Ç–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            –¢–µ—Ö–Ω–æ–ú–∞—Ä—Ç - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏
        </div>
    </footer>

    <div class="notification" id="notification"></div>

    <script src="products-data.js"></script>
    <script src="common.js"></script>
    <script>
        function loadComparison() {
            const container = document.getElementById('comparisonContent');
            
            if (comparison.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚öñÔ∏è</div>
                        <h2>–°–ø–∏—Å–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—É—Å—Ç</h2>
                        <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç</p>
                        <a href="catalog.html" class="btn-primary" style="display: inline-block; width: auto;">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
                    </div>
                `;
                return;
            }

            const comparisonProducts = getProductsByIds(comparison);
            
            // Collect all unique spec keys
            const allSpecs = new Set();
            comparisonProducts.forEach(product => {
                Object.keys(product.specs).forEach(key => allSpecs.add(key));
            });

            // Build comparison table
            let tableHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <p style="color: #6B7280;">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ ${comparison.length} —Ç–æ–≤–∞—Ä–æ–≤</p>
                    <button class="btn-secondary" onclick="clearComparison()">–û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                </div>
                <div class="comparison-table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>–¢–æ–≤–∞—Ä</th>
                                ${comparisonProducts.map(p => `
                                    <td class="comparison-product-cell">
                                        <div class="comparison-product-image">${p.image}</div>
                                        <div class="comparison-product-name">${p.name}</div>
                                        <div class="comparison-product-price">${p.price} Br</div>
                                        <button class="btn-primary" onclick="addToCart(${p.id})" style="margin-bottom: 8px; font-size: 14px; padding: 8px 16px;">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                                        <br>
                                        <button class="comparison-remove" onclick="removeFromComparison(${p.id})">–£–¥–∞–ª–∏—Ç—å</button>
                                    </td>
                                `).join('')}
                                ${Array(4 - comparisonProducts.length).fill(0).map(() => `
                                    <td class="comparison-product-cell">
                                        <div class="empty-slot">
                                            <div class="empty-slot-icon">‚ûï</div>
                                            <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä</p>
                                        </div>
                                    </td>
                                `).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th class="spec-row-label">–†–µ–π—Ç–∏–Ω–≥</th>
                                ${comparisonProducts.map(p => `
                                    <td class="spec-value">${'‚≠ê'.repeat(p.rating)}</td>
                                `).join('')}
                                ${Array(4 - comparisonProducts.length).fill(0).map(() => `<td class="spec-value">‚Äî</td>`).join('')}
                            </tr>
                            <tr>
                                <th class="spec-row-label">–ù–∞–ª–∏—á–∏–µ</th>
                                ${comparisonProducts.map(p => `
                                    <td class="spec-value" style="color: ${p.inStock ? '#10B981' : '#EF4444'}">
                                        ${p.inStock ? '‚úì –í –Ω–∞–ª–∏—á–∏–∏' : '‚úó –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}
                                    </td>
                                `).join('')}
                                ${Array(4 - comparisonProducts.length).fill(0).map(() => `<td class="spec-value">‚Äî</td>`).join('')}
                            </tr>
                            ${Array.from(allSpecs).map(specKey => `
                                <tr>
                                    <th class="spec-row-label">${specKey}</th>
                                    ${comparisonProducts.map(p => `
                                        <td class="spec-value">${p.specs[specKey] || '‚Äî'}</td>
                                    `).join('')}
                                    ${Array(4 - comparisonProducts.length).fill(0).map(() => `<td class="spec-value">‚Äî</td>`).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;

            container.innerHTML = tableHTML;
        }

        function removeFromComparison(productId) {
            toggleCompare(productId);
            loadComparison();
        }

        function clearComparison() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è?')) {
                comparison = [];
                localStorage.setItem('comparison', JSON.stringify(comparison));
                updateBadges();
                loadComparison();
                showNotification('–°–ø–∏—Å–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—á–∏—â–µ–Ω');
            }
        }

        function goToSearch() {
            const query = document.getElementById('searchInput').value;
            window.location.href = `catalog.html?search=${encodeURIComponent(query)}`;
        }

        loadComparison();
    </script>
</body>
</html>

